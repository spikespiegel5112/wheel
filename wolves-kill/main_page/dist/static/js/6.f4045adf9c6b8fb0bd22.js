webpackJsonp([6],{NmCu:function(e,a,t){var s=t("gLhE");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("FIqI")("9f7b7606",s,!1,{})},gLhE:function(e,a,t){a=e.exports=t("UTlt")(!1),a.push([e.i,"",""])},uJaI:function(e,a,t){"use strict";function s(e){m||t("NmCu")}Object.defineProperty(a,"__esModule",{value:!0});var o=t("NQGu"),r=t("XG+O"),i=(r.a,{name:"wolveskill",components:{Confirm:r.a},data:function(){return{getUserInfoByTokenRequest:"uaa/user",addUserSchoolRequest:"profile-service/1.0.0/user_school/addUserSchool",check_join_activityRequest:"promotion-service/1.0.0/offline_activity/check_join_activity",participate_activityRequest:"promotion-service/1.0.0/offline_activity/participate_activity",fnvalleySdkInstance:{},showYearList:!1,activeTabIndex:0,participateSuccessful:!1,activityBeganFlag:!1,confirmState:"default",confirmContentDictionary:{default:{content:"<p></p>"}},schoolList:[[{name:"西安欧亚学院",value:"ouya"},{name:"陕西财经学校",value:"xiancaijin"},{name:"西安美术学院",value:"xianmeishu"},{name:"西北政法大学",value:"xianzhenfa"},{name:"陕西中医药大学",value:"xianzyy"},{name:"西北大学现代学院",value:"xianxiandai"},{name:"陕西职业技术学院",value:"xianzhiye"},{name:"西安培华学院新校区",value:"xianpeihua_new"}]],formData:{userRealName:"",userImage:"",userSchoolName:"",userMajor:"",userEntranceYear:""},rules:{userRealName:function(e){return{valid:""!==e&&null!==e,msg:"此项为必填项"}},userImage:function(e){return{valid:""!==e&&null!==e,msg:"此项为必填项"}},userSchoolName:function(e){return{valid:""!==e&&null!==e,msg:"此项为必填项"}},userMajor:function(e){return{valid:""!==e&&null!==e,msg:"此项为必填项"}},userEntranceYear:function(e){return{valid:""!==e&&null!==e,msg:"此项为必填项"}}},confirmFlag:!1,rejectFlag:!1,redirectingFlag:!0,unauthorizedFlag:!1,successfulFlag:!1,downloadUrl:"",chosenUserSchoolName:[],chosenUserEntranceYear:[]}},computed:{accessToken:function(){return this.$store.state.accessToken},loginId:function(){return this.$store.state.loginId},channel:function(){return this.$route.query.channel||""},activityId:function(){return 5},tabBarWidth:function(){return 16*this.tabList[this.activeTabIndex].title.length+"px"},yearsList:function(){for(var e=[],a=2e3;a<=2020;a++)e.push(a);return[e]}},watch:{chosenUserEntranceYear:function(e){this.formData.userEntranceYear=e[0]}},beforeMount:function(){console.log(this.$route),this.$vux.loading.show({text:"Loading"}),"advertise"===this.$route.query.routeto?(this.$vux.loading.hide(),this.$router.push({name:"wolveskillAdvertise"})):(this.redirectingFlag=!1,this.$vux.loading.hide()),this.$getAccessToken(),this.$getUserLoginId()},mounted:function(){console.log(new o.a),this.fnvalleySdkInstance=new o.a,console.log(this.redirectingFlag),this.redirectingFlag||(this.$remResizing({fontSize:20}),this.$autoHeight({target:".wolveskill_main_container"}),console.log(window))},methods:{participate:function(){var e=this;this.$vux.loading.show({text:"提交中"});var a={userRealName:this.formData.userRealName,userImage:this.formData.userImage,userSchoolName:this.formData.userImage,userMajor:this.formData.userMajor,userEntranceYear:this.formData.userEntranceYear};a={userRealName:"aaa",userImage:"iiiiii",userSchoolName:"bbb",userMajor:"ccc",userEntranceYear:"ddd"},this.$http.post(this.$baseUrl+this.participate_activityRequest+"/"+this.$store.state.activityId,{},{params:a,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+this.$store.state.accessToken}}).then(function(a){switch(console.log(a),e.$vux.loading.hide(),a.code){case 1e4:e.successfulFlag=!0,e.$router.push({name:"canvass"});break;case 10001:case 10006:case 10007:case 10029:e.$vux.confirm.show({showCancelButton:!1,title:a.message,onConfirm:function(){}})}}).catch(function(a){console.log(a),e.$vux.confirm.show({showCancelButton:!1,title:a.error,onConfirm:function(){}})})},handleTabClick:function(e){console.log(e),this.activeTabIndex=e},goBack:function(){this.$router.push({name:"homepage"})},uploadAvatar:function(){var e=this;console.log(this.fnvalleySdkInstance),this.fnvalleySdkInstance.uploadImage().then(function(a){e.formData.userImage=a,e.$vux.confirm.show({showCancelButton:!1,title:"图片上传成功",onConfirm:function(){}})}).catch(function(a){e.$vux.confirm.show({showCancelButton:!1,title:"图片上传失败",onConfirm:function(){}})})},chooseUserSchoolName:function(e){console.log(e[0]),console.log(this.chosenUserSchoolName),this.formData.userSchoolName=e[0]}}}),n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"common_main_container"},[e.redirectingFlag?t("div",{staticClass:"common_initializing_item"}):t("div",{staticClass:"wolveskill_main_container"},["wechat"===e.$checkEnvironment()?t("div",{staticClass:"common_header_wrapper"},[t("div",{staticClass:"left_wrapper"},[t("div",{staticClass:"previous"},[t("a",{on:{click:e.goBack}},[t("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-left",attrs:{type:"ios-arrow-left",size:"30",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 512 512"}},[t("path",{attrs:{d:"M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"}})])])])]),e._v(" "),t("div",{staticClass:"middle_wrapper"},[e._v("\n        填写信息\n      ")])]):e._e(),e._v(" "),t("div",{staticClass:"wolveskill_participateform_wrapper"},[t("div",{staticClass:"wolveskill_formitem_wrapper"},[t("group",[t("x-input",{ref:"userRealNameRef",attrs:{"label-width":"6rem",title:"姓名",placeholder:"请输入您的姓名","is-type":e.rules.userRealName,required:""},model:{value:e.formData.userRealName,callback:function(a){e.$set(e.formData,"userRealName",a)},expression:"formData.userRealName"}})],1)],1),e._v(" "),t("div",{staticClass:"wolveskill_formitem_wrapper"},[t("group",[t("x-input",{attrs:{"label-width":"6rem",title:"电话",placeholder:"请输入您的电话",readonly:""},model:{value:e.loginId,callback:function(a){e.loginId=a},expression:"loginId"}})],1)],1),e._v(" "),t("div",{staticClass:"wolveskill_formitem_wrapper"},[t("group",[t("popup-picker",{attrs:{title:"学校",placeholder:"请选择您的院校",data:e.schoolList,"show-name":!0,required:""},on:{"on-change":e.chooseUserSchoolName},model:{value:e.chosenUserSchoolName,callback:function(a){e.chosenUserSchoolName=a},expression:"chosenUserSchoolName"}}),e._v(" "),t("x-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"userSchoolNameRef",attrs:{title:"学校",placeholder:"请输入您的专业",required:""},model:{value:e.formData.userSchoolName,callback:function(a){e.$set(e.formData,"userSchoolName",a)},expression:"formData.userSchoolName"}})],1)],1),e._v(" "),t("div",{staticClass:"wolveskill_formitem_wrapper"},[t("group",[t("x-input",{ref:"userMajorRef",attrs:{"label-width":"6rem",title:"专业",placeholder:"请输入您的专业",required:""},model:{value:e.formData.userMajor,callback:function(a){e.$set(e.formData,"userMajor",a)},expression:"formData.userMajor"}})],1)],1),e._v(" "),t("div",{staticClass:"wolveskill_formitem_wrapper"},[t("group",[t("popup-picker",{attrs:{title:"入学年份",placeholder:"请选择入学年份",data:e.yearsList,required:""},model:{value:e.chosenUserEntranceYear,callback:function(a){e.chosenUserEntranceYear=a},expression:"chosenUserEntranceYear"}}),e._v(" "),t("x-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"userEntranceYearRef",attrs:{title:"入学年份",required:""},model:{value:e.formData.userEntranceYear,callback:function(a){e.$set(e.formData,"userEntranceYear",a)},expression:"formData.userEntranceYear"}})],1)],1),e._v(" "),t("div",{staticClass:"wolveskill_formitem_wrapper"},[t("group",{attrs:{"label-width":"100px"}},[t("cell-box",{staticClass:"uploader",attrs:{title:"排行头像"}},[t("a",{on:{click:e.uploadAvatar}},[""===e.formData.userImage?t("svg",{staticClass:"vux-x-icon vux-x-icon-ios-plus-empty",attrs:{type:"ios-plus-empty",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"}},[t("path",{attrs:{d:"M384 265H264v119h-17V265H128v-17h119V128h17v120h120v17z"}})]):t("img",{attrs:{src:e.formData.userImage}})]),e._v(" "),t("x-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"userImageRef",attrs:{"label-width":"6rem",title:"排行头像",required:""},model:{value:e.formData.userImage,callback:function(a){e.$set(e.formData,"userImage",a)},expression:"formData.userImage"}}),e._v(" "),t("p",{staticClass:"hint"},[e._v("\n              个人靓照有助于提升人气\n            ")])],1)],1)],1)]),e._v(" "),t("div",{staticClass:"participatebutton_wrapper"},[t("a",{staticClass:"wolveskill_participatebutton_item",on:{click:e.participate}},[e._v("确定报名")])])]),e._v(" "),t("toast",{attrs:{type:"text",time:2e3,"is-show-mask":"",text:"数据提交成功",position:e.top},model:{value:e.successfulFlag,callback:function(a){e.successfulFlag=a},expression:"successfulFlag"}})],1)},l=[];n._withStripped=!0;var c={render:n,staticRenderFns:l},u=c,m=!1,h=t("C7Lr"),v=s,f=h(i,u,!1,v,"data-v-2dce0ede",null);f.options.__file="src/components/Participate.vue";a.default=f.exports}});