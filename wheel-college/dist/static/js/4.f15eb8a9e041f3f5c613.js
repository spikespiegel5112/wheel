webpackJsonp([4],{SRUp:function(n,t,e){n.exports=e.p+"static/img/emptyprize_00000.cc5906c.png"},c7Bi:function(n,t,e){t=n.exports=e("UTlt")(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},"l+Ie":function(n,t,e){var i=e("c7Bi");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("FIqI")("592e57bb",i,!1,{})},m8Lj:function(n,t,e){"use strict";function i(n){h||e("l+Ie")}Object.defineProperty(t,"__esModule",{value:!0});var a=e("uAC3"),o=e.n(a),s={name:"Promotion",data:function(){return{queryRewardTraceByLoginIdRequest:"promotion-service/1.0.0/rotary_table_activity/queryRewardTraceByLoginId",getSignatureRequest:"account-service/1.0.0/weChat/getSignature",rotatingFlag:!1,accessToken:"",emptyPrizeFlag:!0,prizeData:[],loading:!1,wechatRedirectLink:""}},computed:{loginId:function(){return o.a.get("wheel-loginId")},activityId:function(){return this.$route.query.activityId},channel:function(){return this.$route.query.channel},userActivityId:function(){return this.$route.query.state},identityCode:function(){return this.$route.query.state},wechatAuthCode:function(){return this.$route.query.code},stateCode:function(){return this.$route.query.state},token:function(){return this.$route.query.token}},watch:{token:function(){this.accessToken=this.token}},beforeMount:function(){},mounted:function(){this.$remResizing({fontSize:20}),console.log(this.$route.query.token),this.getMyPrizeData(),this.initJSSDK()},methods:{getMyPrizeData:function(){var n=this,t=this;this.loading=!0,this.$http.get(this.$baseUrl+this.queryRewardTraceByLoginIdRequest,{params:{loginId:o.a.get("wheel-loginId"),productDetail:"all",activityId:this.activityId},headers:{Authorization:"Bearer "+sessionStorage.getItem("wheel-accessToken")}}).then(function(t){console.log(t),n.loading=!1,t=t.data,n.emptyPrizeFlag=0===t.length,n.prizeData=t}).catch(function(e){n.loading=!1,console.log(e),401===e.status&&n.$vux.confirm.show({showCancelButton:!1,title:"当前手机号失效，请重新登录",onConfirm:function(){t.$router.go(-1),sessionStorage.removeItem("wheel-accessToken"),o.a.remove("wheel-loginId")}})})},goBack:function(){this.$router.go(-1)},initJSSDK:function(){var n=this;console.log("777",location.href.split("#")[0]);var t=this.$wechat;this.wechatRedirectLink="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx67c26ff8068af257&redirect_uri=http://activity.fnvalley.com/collegewheel/index.html&response_type=code&scope=snsapi_userinfo&state=channel="+this.channel+"$activityId="+this.activityId+"#wechat_redirect",this.$http.post(this.$baseUrl+this.getSignatureRequest,{url:location.href.split("#")[0]},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(n){var t="";for(var e in n)t+=encodeURIComponent(e)+"="+encodeURIComponent(n[e])+"&";return t}]}).then(function(e){console.log(e),t.config({debug:!1,appId:"wx67c26ff8068af257",timestamp:e.data.timestamp,nonceStr:e.data.nonceStr,signature:e.data.signature,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline"]}),t.error(function(n){console.log(n),alert("wechat error")}),t.ready(function(e){console.log(e),t.checkJsApi({jsApiList:["onMenuShareAppMessage","onMenuShareTimeline"],success:function(n){}});var i="channel="+n.channel+"$activityId="+n.activityId;t.onMenuShareTimeline({title:"吃不到鸡没关系，最swag的福利送给你",link:n.$domainUrl+"?routeto=shareredirect&state="+i,imgUrl:"http://funyvalley.oss-cn-shanghai.aliyuncs.com/share/logo_wechatshare_square_00000.jpg",success:function(){}}),t.onMenuShareAppMessage({title:"吃不到鸡没关系，最swag的福利送给你",desc:"不做LYB，好友携手拿好礼。更有海淘精品等你免费来领取！",link:n.$domainUrl+"?routeto=shareredirect&state="+i,imgUrl:"http://funyvalley.oss-cn-shanghai.aliyuncs.com/share/logo_wechatshare_square_00000.jpg",type:"",dataUrl:"",success:function(){}})})})},checkoutPrize:function(n){var t=this.$domainUrl+"?code=xxxx&state=channel="+o.a.get("wheel-channel")+"$activityId="+sessionStorage.getItem("activityId");history.replaceState({},null,t),location.assign(n.product.url)}}},r=function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("div",{staticClass:"wheel_acceptprize_wrapper"},[i("CommonLoading",{attrs:{loading:n.loading}}),n._v(" "),"wechat"===n.$checkEnvironment()?i("div",{staticClass:"common_header_wrapper"},[i("div",{staticClass:"left_wrapper"},[i("div",{staticClass:"previous"},[i("a",{on:{click:n.goBack}},[i("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-left",attrs:{type:"ios-arrow-left",size:"30",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 512 512"}},[i("path",{attrs:{d:"M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"}})])])])]),n._v(" "),i("div",{staticClass:"middle_wrapper"},[n._v("\n      我的奖品\n    ")])]):n._e(),n._v(" "),n.emptyPrizeFlag?n._e():i("div",{staticClass:"prizedescribe"},[n.prizeData.length>0?i("ul",{staticClass:"main"},n._l(n.prizeData,function(t){return i("li",[i("div",{staticClass:"prizetitle"},[null!==t.product?i("img",{staticClass:"icon",attrs:{src:n.$replaceProtocol(t.product.icon)+"-style_100x100"}}):n._e(),n._v(" "),i("div",{staticClass:"title"},[i("label",[n._v(n._s(t.rewardValue)+n._s(t.rewardDescription))]),n._v(" "),null!==t.product?i("div",{staticClass:"prize"},[i("span",[n._v("￥"+n._s(t.product.originalPrice))])]):n._e()])]),n._v(" "),i("div",{staticClass:"productfeature"},[null!==t.product?i("div",{staticClass:"title"},[i("h1",[n._v("产品特点")]),n._v(" "),""!==t.product.url?i("a",{staticClass:"wheel_product_button",on:{click:function(e){n.checkoutPrize(t)}}},[n._v("立即领取")]):n._e()]):n._e(),n._v(" "),null!==t.product?i("div",{staticClass:"productbanner"},[i("img",{staticClass:"icon",attrs:{src:n.$replaceProtocol(t.product.image)+"-style_600x300"}})]):n._e()])])})):n._e()]),n._v(" "),!n.loading&&n.emptyPrizeFlag?i("div",{staticClass:"empty"},[i("div",{staticClass:"main"},[i("h1",[n._v("暂无奖品")]),n._v(" "),i("img",{attrs:{src:e("SRUp")}}),n._v(" "),i("p",[n._v("领取奖品手机号："+n._s(n.loginId))])])]):n._e()],1)},c=[];r._withStripped=!0;var l={render:r,staticRenderFns:c},u=l,h=!1,d=e("C7Lr"),p=i,g=d(s,u,!1,p,"data-v-3c6a0f84",null);g.options.__file="src/components/MyPrizeList.vue";t.default=g.exports}});